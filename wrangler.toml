# Cloudflare Worker configuration for image serving with R2 integration
# See: https://developers.cloudflare.com/workers/wrangler/configuration/

name = "wedding-photo-worker"
main = "src/worker.ts"
compatibility_date = "2024-01-01"

# R2 bucket binding
# The bucket must be created in your Cloudflare account before deploying
# IMPORTANT: Replace "wedding-photos" with your actual R2 bucket name
[[r2_buckets]]
binding = "R2_BUCKET"
bucket_name = "wedding-photos"  # TODO: Change this to your actual bucket name

# Environment variables
# IMPORTANT: Update these values for your deployment
# BUCKET_NAME should match the bucket_name above
# PUBLIC_ORIGIN should be your Worker's URL (you'll get this after first deployment)
[vars]
BUCKET_NAME = "wedding-photos"  # TODO: Change this to your actual bucket name
PUBLIC_ORIGIN = "https://images.ferrerkandiahwedding.com"  # TODO: Update after deployment

# Route configuration
# This tells Cloudflare to invoke the Worker for all /images/* paths
routes = ["images-cdn.ferrerkandiahwedding.com/images/*"]

[env.production.vars]
BUCKET_NAME = "wedding-photos"
PUBLIC_ORIGIN = "https://images.ferrerkandiahwedding.com"
routes = ["images-cdn.ferrerkandiahwedding.com/images/*"]

[[env.production.r2_buckets]]
binding = "R2_BUCKET"
bucket_name = "wedding-photos"
